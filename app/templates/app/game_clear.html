{% load static %}
<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="{% static 'app/reset.css' %}">
    <link rel="stylesheet" href="{% static 'app/game_clear.css' %}">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚²ãƒ¼ãƒ ã‚¯ãƒªã‚¢ - ç¥çµŒè¡°å¼±</title>
</head>

<body>
    <div class="container">
        <div class="celebration">
            <h1>ğŸ‰ ã‚²ãƒ¼ãƒ ã‚¯ãƒªã‚¢ï¼ ğŸ‰</h1>
            
            <div class="trophy">
                <p class="trophy-emoji">ğŸ†</p>
            </div>

            <div class="result-info">
                <h2>é›£æ˜“åº¦: <span class="difficulty">{{ difficulty }}</span></h2>
                <h3>ã‹ã‹ã£ãŸæ™‚é–“: <span class="time-display">è¨ˆæ¸¬ä¸­...</span></h3>
            </div>

            <div class="message">
                <p>ã™ã¹ã¦ã®ã‚«ãƒ¼ãƒ‰ã‚’æƒãˆã¾ã—ãŸï¼</p>
                <p>ç´ æ™´ã‚‰ã—ã„æˆç¸¾ã§ã™ï¼</p>
            </div>

            <div class="buttons">
                <a href="{% url 'app_game' %}" class="btn btn-home">ãƒˆãƒƒãƒ—ã«æˆ»ã‚‹</a>
                <a href="{% url 'easy_game' %}" class="btn btn-retry">ã‚‚ã†ä¸€åº¦ãƒ—ãƒ¬ã‚¤</a>
            </div>
        </div>
    </div>

    <script>
        // ã‚²ãƒ¼ãƒ é–‹å§‹æ™‚åˆ»ã‚’ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‹ã‚‰å–å¾—
        const startTime = sessionStorage.getItem('gameStartTime');
        
        if (startTime) {
            const endTime = Date.now();
            const elapsedSeconds = Math.floor((endTime - parseInt(startTime)) / 1000);
            const minutes = Math.floor(elapsedSeconds / 60);
            const seconds = elapsedSeconds % 60;
            
            const timeDisplay = document.querySelector('.time-display');
            timeDisplay.textContent = `${minutes}åˆ†${seconds}ç§’`;
            
            // ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚’ã‚¯ãƒªã‚¢
            sessionStorage.removeItem('gameStartTime');
        }

        // é›£æ˜“åº¦ã‚’å–å¾—ã—ã¦è¡¨ç¤º
        const difficulty = sessionStorage.getItem('gameDifficulty');
        if (difficulty) {
            const difficultyMap = {
                'easy': 'ç°¡å˜',
                'normal': 'æ™®é€š',
                'hard': 'é›£ã—ã„'
            };
            document.querySelector('.difficulty').textContent = difficultyMap[difficulty] || difficulty;
        }
    </script>
</body>

</html>
